#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

#include "make_const_nonconst.h"
#include "levels/jrb/header.h"

const LevelScript level_jrb_entry[] = {
	INIT_LEVEL(),
	LOAD_YAY0(0x07, _jrb_segment_7SegmentRomStart, _jrb_segment_7SegmentRomEnd), 
	LOAD_YAY0(0x0B, _effect_yay0SegmentRomStart, _effect_yay0SegmentRomEnd), 
	LOAD_YAY0_TEXTURE(0x09, _water_yay0SegmentRomStart, _water_yay0SegmentRomEnd), 
	LOAD_YAY0(0x0A, _clouds_skybox_yay0SegmentRomStart, _clouds_skybox_yay0SegmentRomEnd), 
	LOAD_YAY0(0x05, _group4_yay0SegmentRomStart, _group4_yay0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group4_geoSegmentRomStart, _group4_geoSegmentRomEnd), 
	LOAD_YAY0(0x06, _group13_yay0SegmentRomStart, _group13_yay0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group13_geoSegmentRomStart, _group13_geoSegmentRomEnd), 
	LOAD_YAY0(0x08, _common0_yay0SegmentRomStart, _common0_yay0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	LOAD_MIO0(0x7, _jrb_segment_7SegmentRomStart, _jrb_segment_7SegmentRomEnd), 
	LOAD_MIO0(0xa, _water_skybox_mio0SegmentRomStart, _water_skybox_mio0SegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_5), 
	JUMP_LINK(script_func_global_14), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_LEFT_HALF_PART, jrb_geo_000978), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_BACK_LEFT_PART, jrb_geo_0009B0), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_RIGHT_HALF_PART, jrb_geo_0009E8), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_BACK_RIGHT_PART, jrb_geo_000A00), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SUNKEN_SHIP, jrb_geo_000990), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SUNKEN_SHIP_BACK, jrb_geo_0009C8), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_ROCK, jrb_geo_000930), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SLIDING_BOX, jrb_geo_000960), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_FALLING_PILLAR, jrb_geo_000900), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_FALLING_PILLAR_BASE, jrb_geo_000918), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_FLOATING_PLATFORM, jrb_geo_000948), 

	AREA(1, jrb_area_1),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF0, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF1, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		MARIO_POS(0x01, 0, 6554, 100, -982),
		OBJECT(MODEL_NONE, 6530, 100, -1006, 0, 0, 0, 0x000A0000, bhvSpinAirborneWarp),
		OBJECT(MODEL_CLOWN_BOSS, -12, 159, -5, 0, 0, 0, 0x00000000, bhvClownBoss),
		OBJECT(MODEL_TRAPEZE, 1818, 1145, 1436, 0, 0, 0, 0x00000000, bhvTrapeze),
		OBJECT(MODEL_TRAPEZE, -995, 1892, 543, 0, -73, 0, 0x00000000, bhvTrapeze),
		OBJECT(MODEL_TRAPEZE, -1278, 2132, -286, 0, -107, 0, 0x00000000, bhvTrapeze),
		OBJECT(MODEL_TRAPEZE, -1070, 2352, -1020, 0, 140, 0, 0x00000000, bhvTrapeze),
		OBJECT(MODEL_BALLOON_PLATFORM, 823, 965, 1483, 0, 0, 0, 0x00000000, bhvBalloonPlatform),
		OBJECT(MODEL_TRAPEZE, 204, 1524, 1436, 0, -38, 0, 0x00000000, bhvTrapeze),
		OBJECT(MODEL_BALLOON_PLATFORM, -421, 1323, 972, 0, -37, 0, 0x00000000, bhvBalloonPlatform),
		OBJECT(MODEL_BALLOON_PLATFORM, 58, 2222, -71, 0, -37, 0, 0x00010000, bhvBalloonPlatform),
		OBJECT(MODEL_BLACK_BOBOMB, -1030, 159, 7, 0, 0, 0, 0x00300000, bhvBobomb),
		OBJECT(MODEL_STAR, 58, 2541, -71, 0, -37, 0, 0x00030000, bhvStar),
		OBJECT(MODEL_CIRCUS_WHEEL, 4110, 3448, -9167, 0, 0, 0, 0x00000000, bhvCircusWheel),
		OBJECT(MODEL_NONE, 6091, 4206, -9508, 0, 0, 0, 0x00000000, bhvWheelWind),
		OBJECT(MODEL_NONE, 2866, 5078, -9508, 0, 0, 0, 0x00000000, bhvWheelWind),
		OBJECT(MODEL_STAR, 2256, 3241, -8717, 0, 0, 0, 0x00010000, bhvStar),
		OBJECT(MODEL_NONE, 10295, 297, -4460, 0, 0, 0, 0x00020000, bhvHiddenRedCoinStar),
		OBJECT(MODEL_CAROUSEL, 10502, -10, -753, 0, 0, 0, 0x00000000, bhvCarousel),
		OBJECT(MODEL_CAROUSEL, 13274, 275, -1619, 0, 68, 0, 0x00000000, bhvCarousel),
		OBJECT(MODEL_CAROUSEL, 13207, 854, 355, 0, 160, 0, 0x00000000, bhvCarousel),
		OBJECT(MODEL_CAROUSEL, 11970, 1227, -377, 0, -153, 0, 0x00000000, bhvCarousel),
		OBJECT(MODEL_NONE, 8404, 0, -735, 0, 0, 0, 0x00000000, bhvClownDoorSpawner),
		OBJECT(MODEL_STAR, 11979, 1665, -1413, 0, 0, 0, 0x00000000, bhvStar),
		OBJECT(MODEL_CLOWN_CLOCK, 11291, 637, -1822, 0, 44, 0, 0x00000000, bhvClownClock),
		OBJECT(MODEL_CLOWN_CLOCK, 13643, 535, 0, 0, 49, 0, 0x00000000, bhvClownClock),
		OBJECT(MODEL_CLOWN_CLOCK, 11260, 139, -3230, 0, 0, -90, 0x00010000, bhvClownClock),
		OBJECT(MODEL_NONE, 10045, 0, -4059, 0, 90, 0, 0x00000000, bhvClownDoorSpawner),
		OBJECT(MODEL_PINWHEEL, 10328, -870, -6375, -90, 0, 0, 0x00010000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 11034, 8, -5580, 0, 0, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_PINWHEEL, 11034, 507, -5580, 0, 0, 0, 0x00000000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 9134, 433, -7474, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_PINWHEEL, 9134, 932, -7474, 0, 38, 0, 0x00000000, bhvPinwheel),
		OBJECT(MODEL_RED_COIN, 11034, 143, -5580, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 9134, 569, -7474, 0, 70, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_PINWHEEL, 9993, -870, -9574, -90, 0, 0, 0x00010000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 10483, 395, -10882, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_PINWHEEL, 10483, 894, -10882, 0, -26, 0, 0x00000000, bhvPinwheel),
		OBJECT(MODEL_RED_COIN, 10483, 530, -10882, 0, 70, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_CLOWN_CLOCK, 10529, 380, -11581, -2, 0, -90, 0x00010000, bhvClownClock),
		OBJECT(MODEL_CLOWN_CLOCK, 10531, 996, -12047, 0, 135, 0, 0x00000000, bhvClownClock),
		OBJECT(MODEL_CIRCUS_POLE, 10150, 395, -12797, 0, 143, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_PINWHEEL, 10150, 894, -12797, 0, 90, 0, 0x00020000, bhvPinwheel),
		OBJECT(MODEL_RED_COIN, 10150, 530, -12797, 0, 143, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_CIRCUS_POLE, 13644, 395, -12831, 0, -37, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_PINWHEEL, 13644, 894, -12831, 0, -90, 0, 0x00020000, bhvPinwheel),
		OBJECT(MODEL_RED_COIN, 13644, 530, -12831, 0, -37, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_CIRCUS_BALLOON, 10489, 558, -12797, 0, 0, 0, 0x00010000, bhvCircusBalloon),
		OBJECT(MODEL_CIRCUS_POLE, 14025, 395, -10421, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_PINWHEEL, 14025, 894, -10421, 0, 0, 0, 0x00020000, bhvPinwheel),
		OBJECT(MODEL_RED_COIN, 14025, 530, -10421, 0, 70, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_CIRCUS_POLE, 14066, 394, -6661, 0, -127, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_PINWHEEL, 14066, 893, -6661, 0, -180, 0, 0x00020000, bhvPinwheel),
		OBJECT(MODEL_RED_COIN, 14066, 530, -6661, 0, -127, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_CIRCUS_BALLOON, 14066, 557, -7000, 0, 0, 0, 0x00020000, bhvCircusBalloon),
		OBJECT(MODEL_PINWHEEL, 12986, -784, -7866, -90, 0, 0, 0x00010000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 11706, 396, -9112, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_PINWHEEL, 11706, 895, -9112, 0, 45, 0, 0x00000000, bhvPinwheel),
		OBJECT(MODEL_RED_COIN, 11706, 532, -9112, 0, 70, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_PINWHEEL, 13225, 138, -6485, -90, 0, 0, 0x00030000, bhvPinwheel),
		OBJECT(MODEL_PINWHEEL, 11987, -365, -5814, -90, 0, 0, 0x00030000, bhvPinwheel),
		OBJECT(MODEL_PINWHEEL, 12633, -106, -6138, -90, 0, 0, 0x00030000, bhvPinwheel),
		OBJECT(MODEL_STEEL_GATE, 15589, 0, -5431, 0, 0, 0, 0x00000000, bhvSteelGate),
		OBJECT(MODEL_CAROUSEL, 18061, -16, -5744, 0, 68, 0, 0x00000000, bhvCarousel),
		OBJECT(MODEL_CAROUSEL, 19250, -16, -5744, 0, 153, 0, 0x00000000, bhvCarousel),
		OBJECT(MODEL_CAROUSEL, 22248, 2382, -11500, 0, -149, 0, 0x00000000, bhvCarousel),
		OBJECT(MODEL_CAROUSEL, 17885, 1315, -12458, 0, -115, 0, 0x00000000, bhvCarousel),
		OBJECT(MODEL_PINWHEEL, 18459, -770, -7118, -90, 0, 0, 0x00010000, bhvPinwheel),
		OBJECT(MODEL_BALLOON_PLATFORM, 22179, 1909, -7534, 0, 1, 0, 0x00000000, bhvBalloonPlatform),
		OBJECT(MODEL_TRAPEZE, 22212, 972, -6804, 0, 90, 0, 0x00000000, bhvTrapeze),
		OBJECT(MODEL_TRAPEZE, 22212, 1735, -6377, 0, -90, 0, 0x00000000, bhvTrapeze),
		OBJECT(MODEL_CIRCUS_POLE, 21595, 1984, -11480, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_PINWHEEL, 21595, 2499, -11480, 0, -72, 0, 0x00040000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 21287, 962, -11600, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_PINWHEEL, 22263, 1302, -12424, -90, 0, 0, 0x00010000, bhvPinwheel),
		OBJECT(MODEL_CLOWN_CLOCK, 21237, 938, -12579, 0, 0, -90, 0x00010000, bhvClownClock),
		OBJECT(MODEL_CLOWN_CLOCK, 20215, 938, -12582, 0, 45, -90, 0x00010000, bhvClownClock),
		OBJECT(MODEL_CIRCUS_POLE, 20968, 1506, -11141, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_PINWHEEL, 20968, 2025, -11141, 0, -127, 0, 0x00040000, bhvPinwheel),
		OBJECT(MODEL_PINWHEEL, 21287, 1442, -11600, 0, -90, 0, 0x00040000, bhvPinwheel),
		OBJECT(MODEL_TRAPEZE, 19574, 1541, -12130, 0, 38, 0, 0x00000000, bhvTrapeze),
		OBJECT(MODEL_POWER_SWITCH, 17059, 1545, -16883, 0, 0, 0, 0x00000000, bhvPowerSwitch),
		TERRAIN(jrb_area_1_collision),
		ROOMS(jrb_area_1_collision_rooms),
		MACRO_OBJECTS(jrb_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_LEVEL_STRIATION),
		TERRAIN_TYPE(TERRAIN_SPOOKY),
	END_AREA(),

	AREA(2, jrb_area_2),
		WARP_NODE(0x0B, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF0, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF1, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_SAD_CAROUSEL, 10502, -10, -753, 0, 0, 0, 0x00010000, bhvCarousel),
		OBJECT(MODEL_SAD_CAROUSEL, 13274, 275, -1619, 0, 68, 0, 0x00010000, bhvCarousel),
		OBJECT(MODEL_SAD_CAROUSEL, 13207, 854, 355, 0, 160, 0, 0x00010000, bhvCarousel),
		OBJECT(MODEL_SAD_CAROUSEL, 11970, 1227, -377, 0, -153, 0, 0x00010000, bhvCarousel),
		OBJECT(MODEL_STAR, 8572, 248, -735, 0, 0, 0, 0x00050000, bhvStar),
		OBJECT(MODEL_SAD_CLOWN_CLOCK, 11291, 637, -1822, 0, 44, 0, 0x00020000, bhvClownClock),
		OBJECT(MODEL_SAD_CLOWN_CLOCK, 13643, 535, 0, 0, 49, 0, 0x00020000, bhvClownClock),
		OBJECT(MODEL_SAD_CLOWN_CLOCK, 11260, 139, -3230, 0, 0, -90, 0x00020000, bhvClownClock),
		OBJECT(MODEL_STEEL_GATE, 8404, 0, -735, 0, 0, 0, 0x00010000, bhvSteelGate),
		OBJECT(MODEL_SAD_PINWHEEL, 10328, -870, -6375, -90, 0, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 11034, 8, -5580, 0, 0, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_SAD_PINWHEEL, 11034, 507, -5580, 0, 0, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 9134, 433, -7474, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_SAD_PINWHEEL, 9134, 932, -7474, 0, 38, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_SAD_PINWHEEL, 9993, -870, -9574, -90, 0, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 10483, 395, -10882, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_SAD_PINWHEEL, 10483, 894, -10882, 0, -26, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_SAD_CLOWN_CLOCK, 10529, 380, -11581, -2, 0, -90, 0x00020000, bhvClownClock),
		OBJECT(MODEL_SAD_CLOWN_CLOCK, 10531, 996, -12047, 0, 135, 0, 0x00020000, bhvClownClock),
		OBJECT(MODEL_CIRCUS_POLE, 10150, 395, -12797, 0, 143, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_SAD_PINWHEEL, 10150, 894, -12797, 0, 90, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 13644, 395, -12831, 0, -37, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_SAD_PINWHEEL, 13644, 894, -12831, 0, -90, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 14025, 395, -10421, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_SAD_PINWHEEL, 14025, 894, -10421, 0, 0, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 14066, 394, -6661, 0, -127, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_SAD_PINWHEEL, 14066, 893, -6661, 0, -180, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_SAD_PINWHEEL, 12986, -784, -7866, -90, 0, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 11706, 396, -9112, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_SAD_PINWHEEL, 11706, 895, -9112, 0, 45, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_SAD_CAROUSEL, 18061, -16, -5744, 0, 68, 0, 0x00010000, bhvCarousel),
		OBJECT(MODEL_SAD_CAROUSEL, 19250, -16, -5744, 0, 153, 0, 0x00010000, bhvCarousel),
		OBJECT(MODEL_SAD_CAROUSEL, 22248, 2382, -11500, 0, -149, 0, 0x00010000, bhvCarousel),
		OBJECT(MODEL_SAD_CAROUSEL, 17885, 1315, -12458, 0, -115, 0, 0x00010000, bhvCarousel),
		OBJECT(MODEL_POWER_SWITCH, 17059, 1545, -16883, 0, 0, 0, 0x00010000, bhvPowerSwitch),
		OBJECT(MODEL_SAD_PINWHEEL, 18459, -770, -7118, -90, 0, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_SAD_PINWHEEL, 22263, 1302, -12424, -90, 0, 0, 0x00060000, bhvPinwheel),
		OBJECT(MODEL_SAD_CLOWN_CLOCK, 21237, 938, -12579, 0, 0, -90, 0x00020000, bhvClownClock),
		OBJECT(MODEL_SAD_CLOWN_CLOCK, 20215, 938, -12582, 0, 45, -90, 0x00020000, bhvClownClock),
		OBJECT(MODEL_CIRCUS_POLE, 20968, 1506, -11141, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_SAD_PINWHEEL, 20968, 2025, -11141, 0, -127, 0, 0x00050000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 21595, 1984, -11480, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_SAD_PINWHEEL, 21595, 2499, -11480, 0, -72, 0, 0x00050000, bhvPinwheel),
		OBJECT(MODEL_CIRCUS_POLE, 21287, 962, -11600, 0, 70, 0, 0x00360000, bhvCircusPole),
		OBJECT(MODEL_SAD_PINWHEEL, 21287, 1442, -11600, 0, -90, 0, 0x00050000, bhvPinwheel),
		OBJECT(MODEL_NONE, 17089, 1112, -16284, 0, -180, 0, 0x000B0000, bhvSpinAirborneWarp),
		TERRAIN(jrb_area_2_collision),
		ROOMS(jrb_area_2_collision_rooms),
		MACRO_OBJECTS(jrb_area_2_macro_objs),
		STOP_MUSIC(0),
		TERRAIN_TYPE(TERRAIN_SPOOKY),
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(0x01, 0, 6554, 100, -982),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
